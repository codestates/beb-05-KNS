openapi: 3.0.0
info:
  description: This is KNS Project API service.
  version: 1.0.0
  title: KNS - Incentive Community Project
  contact:
    email: rlawkdgks11@gmail.com
servers:
  - url: http://localhost:8080
tags:
  - name: auth
    description: Methods to handle authentication
  - name: user
    description: Methods to access and manage user
  - name: post
    description: Methods to access and manage post
  - name: nft
    description: Methods to access and manage nft
  - name: token
    description: Methods to access and manage token
paths:
  /auth/signup:
    post:
      tags:
        - auth
      summary: íšŒì›ê°€ìž…
      description: íšŒì› ì •ë³´ë¥¼ ìž…ë ¥ë°›ì•„ì„œ ê³„ì •ì„ ë§Œë“¤ê³  ì§€ê°‘ ìƒì„±
      operationId: signupUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
        required: true
      responses:
        '201':
          description: successful created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthApiResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorApiResponse'
        '409':
          description: User already exists
  /auth/login:
    post:
      tags:
        - auth
      summary: ë¡œê·¸ì¸
      description: ë¡œê·¸ì¸
      operationId: loginUser
      parameters:
        - name: userId
          in: query
          description: ì‚¬ìš©ìž ì•„ì´ë””
          required: false
          schema:
            type: string
        - name: password
          in: query
          description: ë¹„ë°€ë²ˆí˜¸
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthApiResponse'
        '400':
          description: Invalid userId/password supplied
  /auth/logout:
    get:
      tags:
        - auth
      summary: ë¡œê·¸ì•„ì›ƒ
      description: 'ë¡œê·¸ì•„ì›ƒ refresh token ë§Œë£Œì‹œí‚´'
      operationId: logoutUser
      parameters: []
      responses:
        default:
          description: successful operation
  /user/{userId}:
    get:
      tags:
        - user
      summary: ë§ˆì´íŽ˜ì´ì§€ ë° ìœ ì €ì˜ ìƒì„¸ ì •ë³´
      description: |
        userIdë¡œ user í…Œì´ë¸” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
      operationId: getUserById
      parameters:
        - name: userId
          in: path
          required: true
          description: ì‚¬ìš©ìž ì•„ì´ë””
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserApiResponse'
        '400':
          description: Invalid User ID supplied
        '404':
          description: User not found
          
  /user/{address}:
    post:
      tags:
        - user
      summary: ë¬´ë£Œë¡œ ì´ë” ë°›ê¸°(faucet)
      description: NFT êµ¬ë§¤, ì „ì†¡ ì‹œ ê°€ìŠ¤ë¹„ê°€ ë“¤ê¸°ë•Œë¬¸ì— ì´ë” ë°›ê¸° ì¶”ê°€
      operationId: getEth
      parameters:
        - name: address
          in: path
          required: true
          description: ì§€ê°‘ ì£¼ì†Œ
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid address supplied
        '404':
          description: User not found
  /post:
    post:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ìž‘ì„±
      description: |
        ê²Œì‹œê¸€ ìž‘ì„±
      operationId: savePost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostRegistration'
        required: true
      responses:
        '201':
          description: successful created
        '405':
          description: Invalid input
    
    get:
      tags:
        - post
      summary: ì „ì²´ ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸°
      description: |
        ë“±ë¡í•œ ì „ì²´ ê²Œì‹œê¸€ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
      operationId: getAllPosts
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostApiResponse'
        '404':
          description: Post not found
          
  /post/{postId}:
    put:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ìˆ˜ì •
      description: |
        ê²Œì‹œê¸€ ìˆ˜ì •
      operationId: updatePost
      parameters:
        - name: postId
          in: path
          required: true
          description: ê²Œì‹œê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostUpdate'
        required: true
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '403':
          description: Only you can update or delete it
        '404':
          description: Post not found

    delete:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ì‚­ì œ
      description: |
        ê²Œì‹œê¸€ ì‚­ì œ
      operationId: deletePost
      parameters:
        - name: postId
          in: path
          required: true
          description: ê²Œì‹œê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '403':
          description: Only you can update or delete it
        '404':
          description: Post not found

    get:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ì—ì„œ ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      description: |
        ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      operationId: getPostById
      parameters:
        - name: postId
          in: path
          required: true
          description: ê²Œì‹œê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostApiResponse'
        '400':
          description: Invalid Post ID supplied
        '404':
          description: Post not found
         
  /post/{userId}:
    get:
      tags:
        - post
      summary: ë§ˆì´íŽ˜ì´ì§€ì—ì„œ ìœ ì €ì˜ ê²Œì‹œê¸€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      description: |
        ìœ ì €ì˜ ê²Œì‹œê¸€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      operationId: getPostByUserId
      parameters:
        - name: userId
          in: path
          required: true
          description: ì‚¬ìš©ìž ì•„ì´ë””
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostApiResponse'
        '400':
          description: Invalid User ID supplied
        '404':
          description: Post not found
          
  /post/like/{postId}:
    put:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ì¢‹ì•„ìš” ì—…ë°ì´íŠ¸
      description: |
        ê²Œì‹œê¸€ ì¢‹ì•„ìš” ì—…ë°ì´íŠ¸
      operationId: likePost
      parameters:
        - name: postId
          in: path
          required: true
          description: ê²Œì‹œê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: Post not found
      
  /post/{postId}/comment:
    post:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ëŒ“ê¸€ ìž‘ì„±
      description: |
        ê²Œì‹œê¸€ ìž‘ì„±
      operationId: saveComment
      parameters:
        - name: postId
          in: path
          required: true
          description: ê²Œì‹œê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentRegistration'
        required: true
      responses:
        '201':
          description: successful created
        '405':
          description: Invalid input
          
  /post/comment/{commentId}:
    put:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ëŒ“ê¸€ ìˆ˜ì •
      description: |
        ê²Œì‹œê¸€ ëŒ“ê¸€ ìˆ˜ì •
      operationId: updateComment
      parameters:
        - name: commentId
          in: path
          required: true
          description: ëŒ“ê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentUpdate'
        required: true
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '403':
          description: Only you can update or delete it
        '404':
          description: Comment not found

    delete:
      tags:
        - post
      summary: ê²Œì‹œê¸€ ì‚­ì œ
      description: |
        ê²Œì‹œê¸€ ì‚­ì œ
      operationId: deleteComment
      parameters:
        - name: commentId
          in: path
          required: true
          description: ëŒ“ê¸€ ì•„ì´ë””
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '403':
          description: Only you can update or delete it
        '404':
          description: Comment not found
          
  /nft:
    post:
      tags:
        - nft
      summary: NFT ìƒì„±
      description: |
        NFT ìƒì„±
      operationId: createNFT
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NFTCreate'
        required: true
      responses:
        '201':
          description: successful created
        '405':
          description: Invalid input
          
    get:
      tags:
        - nft
      summary: ì „ì²´ NFT ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      description: |
        NFT ì „ì²´ ì •ë³´ ì¡°íšŒ
      operationId: getAllNFT
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NFTApiResponse'
                
  /nft/{userId}:
    get:
      tags:
        - nft
      summary: ì‚¬ìš©ìž ì•„ì´ë””ë¡œ NFT ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      description: |
        ì‚¬ìš©ìž ì•„ì´ë””ë¡œ NFT ì •ë³´ ì¡°íšŒ
      operationId: getNFTByUserId
      parameters:
        - name: userId
          in: path
          required: true
          description: ì‚¬ìš©ìž ì•„ì´ë””
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NFTApiResponse'
        '400':
          description: Invalid ID supplied
        '404':
          description: NFT not found
          
  /nft/{nftId}:
    get:
      tags:
        - nft
      summary: nft ì•„ì´ë””ë¡œ NFT ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      description: |
        nft ì•„ì´ë””ë¡œ NFT ì •ë³´ ì¡°íšŒ
      operationId: getNFTById
      parameters:
        - name: nftId
          in: path
          required: true
          description: nft Id
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NFTApiResponse'
        '400':
          description: Invalid ID supplied
        '404':
          description: NFT not found
          
  /nft/{nftId}/transfer:
    post:
      tags:
        - nft
      summary: NFT ì „ì†¡
      description: |
        NFT ì „ì†¡
      operationId: transferNFT
      parameters:
        - name: nftId
          in: path
          required: true
          description: ì „ì†¡í•  NFT ID
          schema:
            type: integer
            format: int64
        - name: address
          in: query
          description: ì „ì†¡ ëŒ€ìƒì¸ ì§€ê°‘ ì£¼ì†Œ
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid Address supplied
        '404':
          description: NFT not found
          
  /nft/{nftId}/buy:
    post:
      tags:
        - nft
      summary: NFT êµ¬ë§¤
      description: |
        NFT êµ¬ë§¤
      operationId: buyNFT
      parameters:
        - name: nftId
          in: path
          required: true
          description: êµ¬ë§¤í•  NFT ID
          schema:
            type: integer
            format: int64
        - name: userId
          in: query
          description: êµ¬ë§¤í•  User ID
          schema:
            type: string
        - name: price
          in: query
          description: êµ¬ë§¤ ê°€ê²©
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: NFT not found
          
  /token/{userId}:
    get:
      tags:
        - token
      summary: ì‚¬ìš©ìž ì•„ì´ë””ë¡œ í† í° ìˆ˜ëŸ‰ ê°€ì ¸ì˜¤ê¸°
      description: |
        ì‚¬ìš©ìž ì•„ì´ë””ë¡œ í† í° ìˆ˜ëŸ‰ ê°€ì ¸ì˜¤ê¸°
      operationId: geTokenByUserId
      parameters:
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/token'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFoundApiResponse'
                
  /token/{userId}/transfer:
    post:
      tags:
        - token
      summary: ERC20 í† í° ì „ì†¡
      description: |
        ERC20 í† í° ì „ì†¡
      operationId: transferToken
      parameters:
        - name: userId
          in: path
          required: true
          description: í† í° ì „ì†¡í•  User ID
          schema:
            type: string
        - name: toUserId
          in: query
          description: í† í° ì „ì†¡ ëŒ€ìƒ User ID
          schema:
            type: string
        - name: tokenAmount
          in: query
          description: ì „ì†¡í•  í† í° ìˆ˜ëŸ‰
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid Address supplied
        '404':
          description: Token not found
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
        username:
          type: string
        createdAt:
          type: string
          format: date-time
          description: Creation date
          example: '2021-01-30T08:30:20.000Z'
        address:
          type: string
        tokenAmount:
          type: integer
          format: int32
        ethAmount:
          type: integer
          format: int32
        mnemonicWord:
          type: string
        privateKey:
          type: string
      required:
        - id
        - username
        - address
        - tokenAmount
        - ethAmount
        - mnemonicWord
        - privateKey
      example: null
    UserRegistration:
      type: object
      title: User registration details
      properties:
        userName:
          type: string
        password:
          type: string
          minLength: 5
        address:
          type: string
        tokenAmount:
          type: integer
          format: int32
        ethAmount:
          type: integer
          format: int32
        mnemonicWord:
          type: string
        privateKey:
          type: string
      required:
        - userName
        - password
        - address
        - mnemonicWord
        - privateKey
      example: null
    Post:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: string
        userName:
          type: string
        title:
          type: string
        content:
          type: string
        createdAt:
          type: string
          format: date-time
          description: Creation date
          example: '2021-01-30T08:30:20.000Z'
        img:
          type: string
        hit:
          type: integer
          format: int32
        like:
          type: integer
          format: int32
      required:
        - id
      example: null
    PostRegistration:
      type: object
      title: Post registration details
      properties:
        userId:
          type: string
        title:
          type: string
        content:
          type: string
        img:
          type: string
      required:
        - userId
        - title
        - content
      example: null
    PostUpdate:
      type: object
      title: Post update details
      properties:
        title:
          type: string
        content:
          type: string
        img:
          type: string
      required:
        - title
        - content
      example: null
    Comment:
      type: object
      properties:
        id:
          type: integer
          format: int64
        postId:
          type: integer
          format: int64
        userId:
          type: string
        userName:
          type: string
        comment:
          type: string
        createdAt:
          type: string
          format: date-time
          description: Creation date
          example: '2021-01-30T08:30:20.000Z'
      required:
        - id
        - postId
        - userId
        - userName
        - comment
      example: null
    CommentRegistration:
      type: object
      title: Comment registration details
      properties:
        postId:
          type: integer
          format: int64
        userId:
          type: string
        userName:
          type: string
        comment:
          type: string
      required:
        - postId
        - userId
        - userName
        - comment
      example: null
    CommentUpdate:
      type: object
      title: Comment update details
      properties:
        comment:
          type: string
      required:
        - comment
      example: null
    nft:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: string
        tokenId:
          type: string
        tokenName:
          type: string
        desc:
          type: string
        tx_hash:
          type: string
        tokenURI:
          type: string
        img:
          type: string
        createdAt:
          type: string
          format: date-time
          description: Creation date
          example: '2021-01-30T08:30:20.000Z'
        isBuy:
          type: boolean
        Price:
          type: integer
          format: int32
        prevUserId:
          type: string
      required:
        - id
        - userId
        - tokenName
        - img
        - Price
      example: null
    NFTCreate:
      type: object
      title: NFT Create details
      properties:
        userId:
          type: string
        tokenId:
          type: string
        tokenName:
          type: string
        desc:
          type: string
        tx_hash:
          type: string
        tokenURI:
          type: string
        img:
          type: string
      required:
        - userId
        - tokenId
        - tokenName
        - tokenURI
        - img
        - isBuy
      example: null
    token:
      type: object
      properties:
        userId:
          type: string
        tokenAmount:
          type: integer
          format: int32
      required:
        - userId
        - tokenAmount
      example: null
    AuthApiResponse:
      type: object
      properties:
        token:
          type: string
        username:
          type: string
      required:
        - token
        - username
      example:
        token: >-
          eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
        username: johndoe
    UserApiResponse:
      type: array
      items:
        $ref: '#/components/schemas/User'
      example: null
    PostApiResponse:
      type: array
      items:
        $ref: '#/components/schemas/Post'
      example: null
    NFTApiResponse:
      type: array
      items:
        $ref: '#/components/schemas/nft'
      example: null
    SuccessApiResponse:
      type: object
      properties:
        message:
          type: string
      required:
        - message
      example:
        message: Success!!
    ErrorApiResponse:
      type: object
      properties:
        message:
          type: string
      required:
        - message
      example:
        message: Something went wrong ðŸ¤ª
    NotFoundApiResponse:
      type: object
      properties:
        message:
          type: string
      required:
        - message
      example:
        message: Not found
